* {
	user-select: none;
	-webkit-user-drag: none;
	-webkit-user-select: none;
}

html {
	background: #f0ffc0;
}

body {
	user-select: none;
	font-family: "SF Pro Display", system-ui, -apple-system, BlinkMacSystemFont,
		"Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
		"Helvetica Neue", sans-serif;
	padding: 0;
	margin: 0;
	overflow: hidden;
	background: #f0ffc0;
}

.page {
	transition: 1s;
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	object-fit: cover;

	opacity: 1;
}

.page.hide {
	opacity: 0;
	pointer-events: none;
}

.page-1 {
	background: url(/assets/img/pages/page-1/background.png);
	background-size: contain;
	display: block;

	transition: 1s;

	.start-button {
		position: absolute;
		width: 421px;
		height: 222px;
		left: 37px;
		top: 629px;
		background: url(/assets/img/pages/page-1/button.svg);
		color: transparent;
		border: none;
		outline: none;

		overflow: hidden;

		transition: 0.3s;

		&::after {
			content: "";
			position: absolute;
			width: 197px;
			height: 103px;
			left: 194px;
			top: 58px;

			background: url(/assets/img/pages/page-1/button-arrow.svg);

			z-index: -1;
			transition: 1s;

			animation: arrow-left-motion 0.5s linear infinite;
		}

		&[disabled] {
			pointer-events: none;
			opacity: 0.2;

			&::after {
				opacity: 0;
			}
		}
	}

	.voice-navigator {
		position: absolute;
		width: 436px;
		height: 263px;
		left: calc(50% - 436px / 2 + 93px);
		top: 588px;
		h1 {
			position: relative;
			left: 18px;
			top: 0px;

			font-style: normal;
			font-weight: 700;
			font-size: 21px;
			line-height: 25px;
			display: flex;
			flex-direction: column;

			color: #99595d;
		}

		.chinese {
			font-size: 18px;
		}

		.teacher {
			position: absolute;
			height: 74px;
			left: 25px;
			top: 75px;

			opacity: 1;
			transform: translateY(0);
			transition: 0.3s;

			display: flex;
			flex-direction: column;

			span.name {
				white-space: nowrap;

				font-style: normal;
				font-weight: 700;
				font-size: 48px;
				display: flex;
				align-items: center;

				color: #99595d;
			}

			span.description {
				font-style: normal;
				font-weight: 700;
				font-size: 14px;

				color: #99595da2;
			}

			span.tag {
				padding: 1px 5px;
				width: fit-content;
				background: #9b5a5d;
				border-radius: 4px;

				font-style: normal;
				font-weight: 700;
				font-size: 16px;

				margin-top: 5px;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;

				color: #ffffff;
			}

			&.down {
				transform: translateY(20%) scale(0.9);
				opacity: 0;
			}

			&.up {
				transform: translateY(-20%) scale(0.9);
				opacity: 0;
			}
		}

		.round-button {
			position: absolute;
			width: 39px;
			height: 39px;
			top: 195px;

			background-color: rgba(117, 214, 255, 0.66);
			border: 2px solid rgba(255, 255, 255, 0.51);
			border-radius: 50%;

			background-image: url(/assets/img/pages/page-1/arrow.svg);

			&.l {
				left: 77px;
			}

			&.r {
				left: 320px;
				transform: rotate(180deg);
			}
		}
	}

	.animate {
		pointer-events: none;
		position: absolute;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;

		z-index: 9;

		.layer-overlap {
			background: #f0ffc1;
			height: 100vh;
			position: absolute;
			left: 510px;
			width: 0;

			transition: 1s;
		}

		.line-overlap {
			background: #99595c;
			height: 100vh;
			position: absolute;
			left: 499px;
			width: 12px;

			transition: 1s;
		}

		h1 {
			position: absolute;
			top: 45%;
			left: 68%;
			font-size: 52px;
			transform: translate(-70%, -50%);
			opacity: 0;

			transition: 1s;
			transition-delay: 0.5s;

			color: #99595d;
		}
	}

	&.animating .animate {
		.layer-overlap {
			width: calc(100vw - 510px);
		}

		.line-overlap {
			left: 100vw;
		}

		h1 {
			transform: translate(-50%, -50%);
			opacity: 1;
		}
	}
}

@keyframes arrow-left-motion {
	from {
		transform: translateX(0);
	}

	to {
		transform: translateX(105px);
	}
}

.page-2 {
	.wrapper {
		position: absolute;
		top: 55%;
		left: 50%;
		transform: translate(-50%, -50%);

		width: 100%;
		height: 100%;

		display: flex;
		flex-direction: row;
		overflow-x: scroll;
	}

	span.frame {
		flex: 1;
		overflow: auto;
		margin: 40px;
		background: transparent;
		border: 10px solid transparent;

		box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.25);

		height: 699px;
		min-width: 469px;
		transform: rotate(17deg) translateY(5%);
		transition: 0.5s cubic-bezier(0.76, 0, 0.24, 1) transform,
			0.5s ease border-color;

		overflow: hidden;

		color: white;

		font-size: 100px;
		font-weight: bold;

		img {
			width: 469px;
			height: 699px;
			object-fit: cover;
			object-position: center;
		}
	}

	.selected {
		border-color: white !important;
		transform: rotate(9deg) translateY(0%) !important;
	}

	.frame-button {
		position: absolute;
		bottom: 50px;
		right: 50px;
		border: none;
		outline: none;
		background: #925d5e;
		color: white;
		font-size: 45px;
		font-weight: bold;

		padding: 15px 35px;

		border-radius: 14px;

		opacity: 0.2;
		transition: 0.2s ease-in-out;
	}

	.continue {
		opacity: 1;
	}
}

.page-3 {
	--filter-card-width: 80vw;
	--filter-card-margin: 10vw;
	--filter-card-total-width: 100vw;
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	overflow: hidden; /* Hide the overall page overflow */

	img {
		position: absolute;
		width: 100%;
		height: 100%;
	}

	/* Removed the @keyframes gradientShift block */

	/* The wrapper now acts as the viewport mask */
	.wrapper {
		position: absolute;
		top: 50%;
		left: 0;
		transform: translateY(-50%); /* Center vertically */
		width: 100%;
		height: 70vh; /* Responsive height */
		cursor: grab;
	}

	/* The new container that will be translated */
	.carousel-track {
		display: flex;
		flex-direction: row;
		height: 100%;
		/* Apple-like smoothness: cubic-bezier(0.25, 1, 0.5, 1) or ease-out */
		transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		will-change: transform; /* Performance hint */
	}

	.filter-name {
		position: absolute;
		bottom: 0%;
		left: 50%;
		transform: translate(-50%, -50%);
		z-index: 10;
		font-size: 1.5rem;

		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;

		.chinese {
			font-size: 1rem;
		}
	}

	/* The filter card itself */
	.filter {
		/* Sizing to show one centered filter with neighbors peeking */
		min-width: var(--filter-card-width); /* 80vw width */
		height: 100%;

		/* Margin creates the spacing and centers the content relative to the wrapper */
		/* This 10vw margin + 80vw width + 10vw margin = 100vw total space per slide unit */
		margin: 0 var(--filter-card-margin);

		flex-shrink: 0;
		position: relative;
		overflow: hidden;

		border-radius: 40px;

		/* --- GORGEOUS DROP SHADOW AND NEW BORDER/GLOW --- */
		/* Shadow 1: Deep, gorgeous drop shadow (no longer "limited") */
		/* Shadow 2: Subtle white border/ring for definition */
		box-shadow: 0 10px 60px rgba(0, 0, 0, 0.25);

		border: 2px solid rgba(255, 255, 255, 0.25);

		/* Center text for debugging */
		display: flex;
		align-items: center;
		justify-content: center;
		color: white;
	}

	/* Overlay Styles */
	.blur-overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		backdrop-filter: blur(5px) brightness(0.6);
		/* Mask to create fade effect at edges */
		mask-image: linear-gradient(
			180deg,
			transparent 80%,
			black 90%,
			rgba(0, 0, 0, 0.5) 100%
		);
	}

	.filter-overlay {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		transition: backdrop-filter 0.3s ease; /* Smooth filter changes */
	}

	/* Filter Definitions (6 now included) */
	/* IMPORTANT: User requested not to change these filter details */
	/* 1. Original/Normal */
	.filter-1 > .filter-overlay {
		backdrop-filter: none;
	}

	/* 2. 英式怀旧复古 (British Nostalgic Retro Filter) */
	/* Goal: Warm, deep, and aged look. (Based on iPhone recipe: Saturation +40, Temp -7, Contrast +12) */
	.filter-2 > .filter-overlay {
		backdrop-filter: sepia(50%) contrast(115%) brightness(95%)
			saturate(140%);
	}

	/* 3. INS奶油质感 (INS Creamy Texture Filter) */
	/* Goal: Soft, light, dreamy look. (Based on iPhone recipe: Highlights -20, Contrast -23, Brightness +10) */
	.filter-3 > .filter-overlay {
		backdrop-filter: brightness(115%) contrast(85%) saturate(110%);
	}

	/* 4. 元气复古 (Energetic Retro Filter) */
	/* Goal: Vibrant, strong color, retro vibe. (Based on iPhone recipe: Brilliance +77, Saturation +15, Temp +15) */
	.filter-4 > .filter-overlay {
		backdrop-filter: sepia(30%) contrast(125%) saturate(150%)
			hue-rotate(-10deg);
	}

	/* 5. 高级暗黑 (INS High-End Dark Filter) */
	/* Goal: High contrast, low brightness/saturation. (Based on iPhone recipe: Brightness -40, Saturation -40, Contrast +12) */
	.filter-5 > .filter-overlay {
		backdrop-filter: brightness(70%) contrast(140%) saturate(75%);
	}

	/* 6. 绝美发光日落 (Gorgeous Glowing Sunset Filter) */
	/* Goal: High warmth and brightness. (Based on iPhone recipe: Brilliance +100, Temp +100) */
	.filter-6 > .filter-overlay {
		backdrop-filter: brightness(130%) sepia(80%) saturate(160%)
			hue-rotate(-15deg);
	}

	/* Filter Button */
	.filter-button {
		position: absolute;
		bottom: 5vh;
		left: 50%;
		transform: translateX(-50%);
		border: none;
		outline: none;
		background: #925d5e;
		color: white;
		font-size: clamp(1rem, 4vw, 2rem); /* Responsive font size */
		font-weight: bold;
		padding: 15px 35px;
		border-radius: 14px;
		box-shadow: 0 5px 15px rgba(146, 93, 94, 0.5);
		transition: transform 0.2s, background 0.2s;
		cursor: pointer;
	}
	.filter-button:hover {
		background: #b07d7e;
		transform: translateX(-50%) scale(1.05);
	}
}

.page-4 {
	.picture-count {
		position: absolute;
		left: calc(50% - 548px / 2);
		top: 195px;

		font-style: normal;
		font-weight: 700;
		font-size: 64px;
		line-height: 76px;
		align-items: center;
		text-align: center;

		color: rgba(0, 0, 0, 0.4);
	}

	.countdown {
		position: absolute;
		left: 50%;
		top: 50%;

		transform: translate(-50%, -50%);
		margin: 0;

		font-style: normal;
		font-weight: 700;
		font-size: 376px;
		line-height: 449px;
		/* identical to box height */
		display: flex;
		align-items: center;
		text-align: center;

		color: #99595d;
	}

	.unit {
		/* seconds */

		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		top: 682px;

		font-style: normal;
		font-weight: 700;
		font-size: 64px;
		line-height: 76px;
		display: flex;
		align-items: center;
		text-align: center;

		color: rgba(0, 0, 0, 0.4);
	}

	button:not(.show) {
		filter: blur(50px);
	}

	button.skip {
		transition: 1s;
		/* display: none; */
		position: absolute;
		bottom: 50px;
		right: 50px;
		border: none;
		outline: none;
		background: #925d5e;
		color: white;
		font-size: 45px;
		font-weight: bold;

		padding: 5px 35px;

		border-radius: 14px;

		display: flex;
		align-items: center;
		justify-content: center;

		&::after {
			content: "";
			background: url(/assets/icons/forward.svg);
			width: 32px;
			height: 32px;
			background-size: contain;
			background-repeat: no-repeat;
			display: inline-block;
			margin-left: 1rem;
		}
	}

	button.toggle-preview-collapse {
		transition: 1s;
		position: absolute;
		bottom: 50px;
		left: 50px;
		border: none;
		outline: none;
		background: #925d5e;
		color: white;
		font-size: 45px;
		font-weight: bold;

		padding: 5px 25px;

		border-radius: 14px;

		display: flex;
		align-items: center;
		justify-content: center;

		.animated-arrows {
			width: 32px;
			height: 32px;
			position: relative;
			margin-left: 1rem;

			&::before {
				content: "";
				position: absolute;
				top: 0;
				right: 0;
				width: 16px;
				height: 32px;
				background: url(/assets/icons/half-arrow.svg);
				background-size: contain;
				background-repeat: no-repeat;
				transition: 1.5s cubic-bezier(0.87, 0, 0.13, 1);
			}

			&::after {
				content: "";
				position: absolute;
				bottom: 0;
				left: 0;
				width: 16px;
				height: 32px;
				background: url(/assets/icons/half-arrow.svg);
				background-size: contain;
				background-repeat: no-repeat;
				transform: rotate(180deg);
				transition: 1.5s cubic-bezier(0.87, 0, 0.13, 1);
			}

			&.collapsed {
				&::before {
					top: -50%;
					transform: rotate(180deg);
				}

				&::after {
					bottom: -50%;
					transform: rotate(360deg);
				}
			}
		}
	}
}

.page-5 {
	.grid {
		display: grid;
		grid-template-columns: 1fr 1fr; /* 2 columns */
		grid-template-rows: repeat(3, auto); /* 3 rows */
		gap: 20px; /* space between images */

		width: 55%; /* responsive but never too wide */
		height: calc(100% - 100px);
		position: absolute;
		right: 0;
		padding: 50px;
	}

	.img {
		width: 100%;
		/* aspect-ratio: 1 / 1; */
		overflow: hidden;
		position: relative;
	}

	.img img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
		transition: transform 0.3s ease;
	}

	button {
		position: absolute;
		width: 290px;
		height: 70px;
		bottom: 50px;
		left: 50px;
		background: #bf4547;
		border: 1px solid rgba(0, 0, 0, 0.71);
		border-radius: 14px;
		font-style: normal;
		font-weight: 700;
		font-size: 38px;
		line-height: 45px;
		display: flex;
		align-items: center;
		justify-content: center;
		text-align: center;

		color: white;
	}

	.preview {
		width: 480px;
		height: 715px;
		position: absolute;
		left: 40px;
		top: 63px;
		background: #99595d;
		transform: rotate(7deg);
	}

	.img::before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;

		transition: 0.5s;

		backdrop-filter: blur(0px) brightness(1);
	}

	.img::after {
		content: "";
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 70px;
		height: 70px;
		background: url(/assets/icons/undo.svg);
		background-size: contain;
		background-position: center;
		background-repeat: no-repeat;

		opacity: 0;

		transition: 0.7s;
	}

	.selected::before {
		backdrop-filter: blur(7px) brightness(0.9);
	}

	.selected::after {
		opacity: 1;
	}
}

.page-6 {
	h2 {
		position: absolute;
		top: 40%;
		left: 50%;
		transform: translate(-50%, -50%);

		font-style: normal;
		font-weight: normal;
		font-size: 32px;
	}

	img {
		z-index: -1;

		position: absolute;
		width: 313.99px;
		height: 467.67px;

		left: 50%;
		top: 80%;

		transform: translate(-50%, -50%) rotate(-21.26deg);

		box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.25);

		filter: blur(20px);
		transition: 0.5s ease-in-out;
	}
}

.page-7 {
	position: relative;
	span.results {
		position: absolute;
		width: 424px;
		height: 76px;
		left: calc(50% - 424px / 2 - 416px);
		top: calc(50% - 76px / 2 - 383px);

		font-style: normal;
		font-weight: 700;
		font-size: 100px;
		line-height: 75.92%;
		/* identical to box height, or 76px */
		display: flex;
		align-items: center;
		text-align: right;

		color: #99595d;
	}

	span.line {
		/* Line 2 */

		position: absolute;
		width: 0px;
		height: 671px;
		left: calc(50% - 671px / 2 + 362.5px);
		top: 151px;

		border: 1px solid #99595d;
	}

	span.current {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
	}

	img.final-image {
		/* Frame */

		position: absolute;
		width: 313.99px;
		height: 467.67px;
		left: 0px;
		top: 288px;

		box-shadow: 0px 0px 16px rgba(0, 0, 0, 0.25);
		transform: rotate(-21.26deg);
	}

	.qr-code {
		position: absolute;
		width: 250px;
		height: 250px;
		left: 390px;
		top: 319px;

		display: flex;
		justify-content: center;
		align-items: center;

		background: #ffffff;

		img {
			width: 90%;
			height: 90%;
			object-fit: cover;
			object-position: center;
		}
	}

	.caption {
		position: absolute;
		height: 86px;
		left: calc(50% - 216px / 2 - 148px);
		top: calc(50% - 86px / 2 + 126px);

		font-style: normal;
		font-weight: 700;
		font-size: 36px;
		line-height: 43px;
		display: flex;
		align-items: center;
		text-align: right;

		color: #99595d;
	}

	.countdown {
		position: absolute;
		right: 20px;
		bottom: 20px;
		font-style: normal;
		font-size: 64px;
	}

	.shop {
		top: 625px;
	}

	.leave-button {
		top: 802px;
	}

	button {
		position: absolute;
		width: 290px;
		height: 70px;
		background: #925d5e;
		border: 1px solid rgba(0, 0, 0, 0.71);
		border-radius: 14px;
		font-style: normal;
		font-weight: 700;
		font-size: 38px;
		line-height: 45px;
		display: flex;
		align-items: center;
		justify-content: center;
		text-align: center;

		color: white;

		img {
			filter: invert(1);
		}
	}

	.text-offer {
		position: absolute;
		display: none;
		left: 802px;
		top: 0;
		bottom: 0;

		flex-direction: column;
		justify-content: center;
		align-items: start;
	}

	.o1 {
		display: flex;
	}

	h1 {
		font-style: normal;
		font-weight: 800;
		font-size: 53px;
		line-height: 63px;
		display: flex;
		align-items: start;
		margin-top: 0px;

		text-align: left;

		color: #99595d;
	}

	h2 {
		font-style: normal;
		font-weight: 400;
		font-size: 42px;
		line-height: 50px;
		display: flex;
		align-items: center;
		margin-top: 0px;

		color: #99595d;
	}

	.skip {
		font-style: normal;
		font-weight: 400;
		font-size: 31px;
		line-height: 37px;
		/* identical to box height */
		display: flex;
		align-items: center;
		text-decoration-line: underline;

		color: #99595d;

		opacity: 0.3;
	}
}

.animation-captured {
	height: 100vh;
	width: 100vw;

	top: 50%;

	left: 50%;
	transform: translate(-50%, -50%);

	position: absolute;
	background: var(--captured-image);
	background-size: cover;
	background-repeat: no-repeat;
	background-position: center;

	pointer-events: none;
	opacity: 0;
	transition: opacity 0.5s ease;
}

.purchase-confirm-overlap {
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background: rgba(0, 132, 0, 0.5);
	backdrop-filter: blur(10px) brightness(70%) saturate(150%);
	display: flex;
	justify-content: center;
	align-items: center;
	flex-direction: column;
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.5s ease;

	&.visible {
		opacity: 1;
		pointer-events: all;
	}

	color: white;

	h1 {
		font-size: 64px;
		margin-bottom: 30px;
		font-weight: normal;
		margin-top: 0;
	}

	h2 {
		font-size: 48px;
		margin-bottom: 50px;
		font-weight: bold;
		margin-top: 0;
		background: linear-gradient(90deg, #e2c29e, #2ee5d9);
		padding: 10px 20px;
		color: black;
		border-radius: 17px;
		display: flex;
		align-items: center;
		img {
			width: 40px;
			height: 40px;
			margin-right: 10px;
			margin-top: 3px;
		}
	}

	button {
		width: 160px;
		height: 60px;
		background: #99595d;
		border: none;
		outline: none;
		margin-top: 50px;
		border-radius: 14px;
		font-size: 36px;
		font-weight: bold;
		color: white;
		cursor: pointer;
	}

	input[type="range"] {
		--value: 0%;
		-webkit-appearance: none;
		appearance: none;
		width: 80%;
		height: 20px;
		border-radius: 20px;
		background: linear-gradient(
			90deg,
			blue 0%,
			yellow calc(var(--value) - 15%),
			white var(--value),
			#ffcc00 100%
		);
		outline: none;
		padding: 0;
		margin: 0;
	}

	input[type="range"]::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 80px;
		height: 80px;
		background: url(/assets/icons/cart.svg);
		transform: translate(-20px, 10px);
		background-size: cover;
		cursor: pointer;
		margin-top: -3px;
	}
}

.animates {
	opacity: 1;
	animation: up-scale 1.5s ease-in-out forwards;
}

@keyframes up-scale {
	0% {
		height: 250px;
		width: 444px;
		top: 0;
		border: 6px solid white;
	}

	70% {
		top: 50%;
		border: 6px solid white;
	}

	100% {
		height: 100vh;
		width: 100vw;
		top: 50%;
		border: 0px solid white;
	}
}
